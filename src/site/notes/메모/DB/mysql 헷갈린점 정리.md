---
{"dg-publish":true,"permalink":"//db/mysql/"}
---


- **mysql 에서 mvcc 를 구현하는 방법**
	- undo log 영역에 데이터의 변경 이전 사항을 저장해 여러 버전을 관리한다.
	- 또 격리 수준에 따라 mvcc 를 구현하는데 두가지 방법이 있다. repeatable-read 와 read-committed 방법을 사용할 때이다. 전자는 transaction 의 실행 번호를 함께 저장해 쿼리하는 트랜잭션 번호보다 작은 트랜잭션 번호를 갖는 언도로그 데이터를 가져오는 반면, 후자는 undo log 에 트랜잭션 번호를 저장하지 않아 바로 이전 변경의 데이터만 가져온다. 
	  이로 인하여 non-repeatable-read 가 발생한다.

- **클러스터링 인덱스 와 세컨더리 인덱스** 
	- mysql은 클러스터링 인덱스를  사용해 테이블당 1 개의 클러스터링 인덱스를 가지고있다. 세컨더리 인덱스는 리프노드에서 pk값을 가지고 있으며 세컨더리 인덱스는 테이블마다 여러개 존재할 수 있는 특징이 있다. 즉, 한 테이블에서 클러스터링 인덱스와 세컨더리 인덱스는 1:n 관계를 가질 수 있고 논리적으로 사상되어 있는 구조이다.

	  